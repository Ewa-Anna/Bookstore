{% extends "base.html" %}
{% load book_tags %}
{% load static %}

{% block title %}Bookstore{% endblock %}

{% block content %}

<h1> Bookstore </h1>

{% if tag %}
<h4>Books with tag: "{{ tag.name }}"</h4>
{% endif %}

<div class="bookcontainer">

    {% for book in books %}

    <div class="book">
        <div class="bookdetails">

            <div class="icon-container">
                <a class="wishlist-icon" href="#">
                    <i class="fa-regular fa-heart"></i>
                    <!-- <i class="fa-solid fa-heart"></i> For added -->
                </a>
                <a class="cart-icon" href="#" data-bookid="{{ book.bookid }}">
                    <i class="fa-solid {% if book_in_cart %}fa-check{% else %}fa-basket-shopping{% endif %}"></i>
                </a>
            </div>

            <a class="booklink" href="{% url 'book:book_detail' book.slug %}">
                <img class="bookimage" src="{{ book.img_url }}" alt="Book image">

                {{ book.title|truncatechars:30 }}
            </a>
            <br>
            {{ book.author|truncatechars:30 }}
            <br>
            &#36;{{ book.price }}
            <p class="tags">Tags:
                {% spaceless %}
                {% for tag in book.tags.all %}

                <a href="{% url 'book:book_list_by_tag' tag.slug %}">{{ tag.name.strip }}</a>{% if not forloop.last %},
                {% endif %}

                {% endfor %}
                {% endspaceless %}
            </p>
        </div>
    </div>

    {% endfor %}
</div>
{% include "pagination.html" with page=books %}

<h4>Latest arrivals:</h4>
{% show_latest_books 6 %}
<br>
<p style="text-align: center;">We have {% total_books %} books in our store.</p>

<script src="{% static 'js/cart.js' %}"></script>

{% endblock %}